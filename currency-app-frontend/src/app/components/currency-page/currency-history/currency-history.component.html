<div *ngIf="loading" class="flex justify-center items-center mt-4">
  <div
    class="loader w-10 h-10 border-4 border-emerald-400 border-t-transparent rounded-full animate-spin"
  ></div>
</div>
<div
  *ngIf="errorMessage"
  class="flex justify-center items-center text-red-500 bg-red-100 p-4 rounded-md"
>
  <span class="ml-2">{{ errorMessage }}</span>
</div>
<h3 class="text-xl font-semibold text-emerald-700 mb-4 text-center">
  Exchange Rate 30-Day History
</h3>
<div class="chart-container" style="width: 100%; height: 250px">
  <canvas id="exchangeRateChart">{{ chart }}</canvas>
</div>

<div *ngIf="!loading && !errorMessage && history?.length">
  <table class="min-w-full table-auto mt-6 mb-6">
    <thead>
      <tr class="bg-gray-200 text-left">
        <th class="px-4 py-2 text-emerald-800 rounded-l-lg">Date</th>
        <th class="px-4 py-2 text-emerald-800 text-right rounded-r-lg">
          Exchange Rate
        </th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let entry of history" class="border-b border-gray-200">
        <td class="px-4 py-2 text-left">
          {{ entry.timestamp | date : "d MMMM yyyy" }}
        </td>
        <td class="px-4 py-2 text-right text-emerald-700 font-semibold">
          {{ entry.obsValue }}
        </td>
      </tr>
    </tbody>
  </table>
</div>
